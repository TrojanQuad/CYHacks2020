


import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;


public class PasswordLogin {
    public static File file = new File("CredentialStorage");
    public static void createNewUser(String username, String password) throws IOException{
       
        FileWriter writeNewUser = new FileWriter(file, true);
        PrintWriter printNewUser = new PrintWriter(writeNewUser);
        
        if(checkNewUsername(username) == true){
        printNewUser.println(" --U" + username);
        printNewUser.println(password);
        printNewUser.close();
        accountAlert.display("Registration Success", "Login to access account");
        } else{
            accountAlert.display("Registration Error", "Username in use");
        }   
    } 
    //This method is not working an will allow users to have the same username. Needs to be fixed. 
    public static boolean checkNewUsername(String username) throws FileNotFoundException{
        Scanner scanner = new Scanner(file); 
        String lineFromFile;
  	while(scanner.hasNextLine()){
            lineFromFile = scanner.nextLine(); 
        
        if(lineFromFile.substring(3).equals(username)){
            return false;
        }
      }
        return true; 
  }
    static void checkNewInput() throws IOException {
      if(checkNewUser() == false  || checkNewPassword() == false){
         accountAlert.display("Registration Error", "Username or Password not found" );
      }else{
        createNewUser(userAccount.username.getText(), userAccount.password.getText());
       
      }
    }
    static boolean checkNewPassword(){
        return !(userAccount.password.getText().isEmpty()== true || userAccount.password.getLength() < 8 );
    }
    static boolean checkNewUser(){
        return !(userAccount.username.getText().isEmpty()==true || userAccount.username.getLength() <8); 
    }
    
    
}


    
    
     

